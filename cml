set -x

# CI might need to be activated in settings->general->visibillity, project features, permissions->CI/CD
# Runners can be viewed at settings->CI/CD


# REPO https link as given by gitlab clone button
REPO="https://gitlab.ei.htwg-konstanz.de/ag-schubert/workspace/julian/test.git"
# PAT personal access token that has (read?) access to repository
PAT="glpat-RwUHcs-LYiMmec_kyL_B"

docker run \
--gpus all \
-e REPO_TOKEN=$PAT \
iterativeai/cml:0-dvc2-base1-gpu runner launch \
--repo="$REPO" \
--token="$PAT" \
--driver="gitlab" \
--labels="local,runner,ai-cli" \
--idle-timeout="180"
